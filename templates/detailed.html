{% extends 'base.html' %}

{% block title %}
Detailed Review Product Analysis
{% endblock %}

{% block head %}
<style>
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f3df00; /* Yellow */
    color: #000000; /* Black */
}

.container {
    max-width: 800px;
    margin: 50px auto;
    padding: 20px;
}

h1 {
    text-align: center;
}

.report {
    background-color: #000000; /* Black */
    color: #FFFF66; /* Yellow */
    padding: 20px;
    border-radius: 10px;
}

h2 {
    color: #FFFF66; /* Yellow */
}

.report p {
    margin-bottom: 10px;
}

ul {
    padding-left: 20px;
    margin-bottom: 20px;
}

.feedback {
    display: flex;
    flex-wrap: wrap;
}

.feedback-item {
    width: 45%;
    padding: 10px;
    margin: 5px;
    background-color: #f0f007; /* Yellow */
    color: #000000;
    border-radius: 5px;
}

.feedback-item p {
    margin: 0;
}

</style>
{% endblock %}

{% block body %}
<div class="container">
    <h1>Detailed Sales Review Analysis Report</h1>
    <div class="report">
        <h2>Sales Overview</h2>
        <p>Total Sales: $XXXXX</p>
        <p>Average Rating: X.X</p>
        <h2>Product Details</h2>
        <div class="product-details">
            <h3>Product Name: Product 1</h3>
            <p>Units Sold: XXX</p>
            <p>Price: $XX.XX</p>
        </div>
        <h2>Customer Feedback</h2>
        <div class="feedback">
            <div class="feedback-item">
                <p>Customer Name</p>
                <p>"Lorem ipsum dolor sit amet, consectetur adipiscing elit."</p>
                <p>Rating: X</p>
                <p>Sentiment Analysis: Positive</p>
            </div>
            <div class="feedback-item">
                <p>Customer Name</p>
                <p>"Lorem ipsum dolor sit amet, consectetur adipiscing elit."</p>
                <p>Rating: X</p>
                <p>Sentiment Analysis: Negative</p>
            </div>
            <!-- Add more customer feedback as needed -->
        </div>
        <h2>Sentiment Analysis Graph</h2>
        <canvas id="sentimentChart" width="400" height="200"></canvas>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Dummy data for sentiment analysis
    const feedbackData = [
        { text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.", rating: 4, sentiment: "Positive" },
        { text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit.", rating: 2, sentiment: "Negative" },
        // Add more feedback data here
    ];

    // Calculate average sentiment score
    let totalSentimentScore = 0;
    feedbackData.forEach(feedback => {
        if (feedback.sentiment === "Positive") {
            totalSentimentScore += 1;
        } else if (feedback.sentiment === "Negative") {
            totalSentimentScore -= 1;
        }
    });
    const averageSentimentScore = totalSentimentScore / feedbackData.length;

    // Display average sentiment score
    console.log("Average Sentiment Score:", averageSentimentScore);

    // Display sentiment analysis graph
    const ctx = document.getElementById('sentimentChart').getContext('2d');
    const sentimentChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Sentiment Score'],
            datasets: [{
                label: 'Sentiment Score',
                data: [averageSentimentScore],
                backgroundColor: [
                    'rgba(54, 162, 235, 0.2)',
                ],
                borderColor: [
                    'rgba(54, 162, 235, 1)',
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>

{% endblock %}